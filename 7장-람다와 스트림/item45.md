## item 45 - 스트림은 주의해서 사용하라

### 스트림이란?
* java 8에서 추가됨
1. 데이터 원소의 유한 혹은 무한 시퀀스를 뜻한다
2. 스트림 파이프라인은 원소들을 수행하는 연산 단계를 포함하는 개념
<br>
Source => Intermediate => Terminal


![img_2.png](img_2.png)

* Source Stream
    * Map,List,File등등 다양한 형태에서 스트림은 올 수 있다


* Intermediate Operation(중간 연산)
    * 스트림을 어떠한 방식으로든 변환한다.
    * map,filter 등등


* Terminal Operation
    * 최후의 연산을 가한다.
    * 원소를 정렬해 컬렉션에 담거나 , 원소 하나를 선택하는 등
    * findAny,findOne
  

  
* 스트림은 지연 평가(Lazy Evaluation)이다
    * 계산의 결과 값이 필요할 때까지 계산을 늦추는 기법
    * 종단 연산에서 평가(계산)이 이루어진다
    * 종단 연산에 필요 없어진 값이라면 계산에 쓰이지 않는다
    * 종단 연산 필수!!!!!


* 스트림은 메서드 연쇄를 지원하는 플루언트 API이다
    * 파이프 라인을 구성하는 모든 호출을 연결하여 단 하나의 표현식으로 완성
    * 물론 병렬처리도 가능 parell 메서드

---

### 스트림을 언제 써요?

* 여러개의 함수로 나눠서 할일을 한큐에 해결 가능 
> 되풀이 되는 계산을 스트림으로 표현하면 굳 <br>


### 스트림의 단점은요?
* 스트림을 과용하면 프로그램이 읽기 어려워짐
* 스트림은 char를 지원해주지 않음(뭐 만들려면 만들겠지만, 형변환해줘야 하므로 그냥 비추천)


### 적재적소에 맞게 사용하세요 

* 코드 블록(메서드 사용)
    * 코드 블록에서는 범위 안의 지역변수를 읽고 수정할 수 있다
    * 메서드 안에서 다양한 로직을 넣을 수 있음 ex) continue,break 등등
    * 람다에서는 final이거나 사실상 final인 변수만 읽을 수 있고 지역 변수를 수정하는 건 불가능하다

* 스트림
    * 원소들의 시퀀스를 일관되게 반환한다
    * 시퀀스를 필터링
    * 시퀀스를 하나의 연산을 사용해 결합
    * 시퀀스를 공통된 속성으로 하나의 컬렉션에 모은다
    * 특정 조건을 만족하는 원소를 찾는다

tip) 스트림을 반환하는 원소는 정체성을 알기 쉽게 복수 명사로 쓰기를 강력히 추천

* 스트림이 어려운 곳
    * 데이터가 여러 단계를 통과할 때 , 각 단계에서의 값들에 동시에 접근하기 어려운 경우(각 값마다 다른 로직을 처리할 때)
    * 원래의 값을 알고 싶을 때, 스트림은 한번 단계를 거치면 원래의 값을 잃어버림


* 스트림 vs 반복문

    for문이 stream보다 빠릅니다.

  * for문은 단순 인덱스 기반입니다. stream은 jvm에서 이것저것 처리 해줘야해서 실행 시 느림
  * for문은 컴파일러가 최적화를 시켜줌
  * stream은 java8부터 지원, for문은 오래됨
  * 컴파일러가 미리 최적화 가능
  
    그럼에도 stream을 사용하는 이유
  
  * 가독성이 좋음 , 
  * 코드로 작성해야하는 로직을 stream에서 제공해주는 함수로 간단하게 해결가능
  * filter,reduce와 같이 단순 반복함수가 아닐 때 유용하다
  * 데이터가 많지 않으면 stream사용해도 그닥 차이는 없음(primitive vs wrapped)
  * 단순 forEach라면 stream의 forEach(x)


> 가독성을 생각하고 , 성능이 그닥 요구되지 않을 때 스트림을 써보자


---
스트림을 알기 좋아요 <br>
https://www.youtube.com/watch?v=rbm87IFpwvQ&t=316s

for문과 스트림 비교 포스팅<br>
https://sigridjin.medium.com/java-stream-api%EB%8A%94-%EC%99%9C-for-loop%EB%B3%B4%EB%8B%A4-%EB%8A%90%EB%A6%B4%EA%B9%8C-50dec4b9974b
