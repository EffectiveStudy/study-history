# 필요없는 검사 예외 사용은 피하라

검사 예외는 발생한 문제를 사용자가 처리하여 안전성을 높이게끔 도움이 된다.

하지만 검사 예외가 주는 불편함 역시 존재 한다.

* 예외를 catch 블록으로 처리할지 아니면 throw로 처리할지에 대한 부담감
* 검사 예외를 던지는 메서드는 스트림 안에서 직접 사용할 수가 없다.

위와 같은 불편함 때문이라도 API를 제대로 사용해도 발생할 수 있는 예외이거나 의미 있는 조치를 취할 수 있는 경우가 아니라면 비검사 예외를 사용하는게 좋다.

## 우회 방법

**Optional 사용**

예외 대신 적절한 결과 타입을 담은 Optional을 반환할 수 있다. Optional.empty()를 던지는 것도 방법중 한다. 하지만 이 경우 예외가 발생한 이유를 알려주는
부가정보 (cause)를 담을 수 없다는 단점이 있으므로 고려 후 사용해야 한다.

**검사 예외를 2개로 쪼개 비검사 예외로 처리**

검사 예외

```java
try{
    obj.action(args);
    }catch(TheCheckedException e){
    ...//예외 처리
    } 
```

상태 검사 메서드를 이용한 처리

```java
if(obb.actionPermitted(args)){
    obj.action(args);
    }else{
    ... // 예외 상황 처리
    }
```

위와 같이 처리하면 해당 API의 사용자가 예외를 유연하게 처리할 수 있다. 만약 예외가 발생할 가능성이 있다면 위와 같이 if를 통하여 처리할 수 있고 예외가 발생하지 않을게
확실하거나 발생하더라도 쓰레드가 종료되길 희망하면 아래와 같이 해당 메서드를 그냥 사용하면 된다.

```java
obj.action(args);
```

다만 상태 검사 메서드가 가지는 단점인 아래의 두가지 경우를 인지하고 사용하여야 한다.

* 여러 스레드가 동시에 접근하여 상태가 변할 수 있는 상황에서 상태 검사 메서드의 부정확성
* 상태 검사를 통한 중복 작업 수행으로 인한 성능 저하

